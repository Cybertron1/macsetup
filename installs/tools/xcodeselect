#!/bin/bash

set -e

OS_VERSION=$(sw_vers -productVersion | cut -d'.' -f 1-2)

touch /tmp/.com.apple.dt.CommandLineTools.installondemand.in-progress;
PROD=$(softwareupdate -l |
  grep "\*.*Command Line *.* version $OS_VERSION" |
  head -n 1 | awk -F"*" '{print $2}' |
  sed -e 's/^ *//' |
  tr -d '\n')
softwareupdate -i "$PROD"
rm /tmp/.com.apple.dt.CommandLineTools.installondemand.in-progress

printf "âœ…\033[92mCommandLineTools were installed\033[0m\n"
